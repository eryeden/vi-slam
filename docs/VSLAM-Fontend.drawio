<mxfile host="app.diagrams.net" modified="2020-05-03T15:28:30.274Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.122 Safari/537.36" etag="0wcwoJQ46tPsoAJv4Kdn" version="13.0.1" type="github" pages="2">
  <diagram id="4V9aUl03h_kaWBGR1Yky" name="Fontend-review">
    <mxGraphModel dx="2958" dy="982" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VGC260k_tyWZGbdCQ8ms-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-19" target="VGC260k_tyWZGbdCQ8ms-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1610" y="2480.02" />
              <mxPoint x="1610" y="2760.02" />
              <mxPoint x="460" y="2760.02" />
              <mxPoint x="460" y="2499.02" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;fontSize=34;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="CZVS23kr_gq7ErG93lJm-42" target="CZVS23kr_gq7ErG93lJm-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1320" y="1170" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-1" value="&lt;h1&gt;OrbSLAM&lt;/h1&gt;&lt;p&gt;OrbSLAMのFrontendは、すでに生成したMapからのFeedbackもあるため構造が把握しにくいので、フローを描く。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-430" y="100" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-2" value="&lt;h1&gt;Frontend review&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-770" y="40" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-3" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="30" y="360" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-8" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="40" y="370" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-9" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="50" y="380" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-10" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="330" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="CZVS23kr_gq7ErG93lJm-11" target="CZVS23kr_gq7ErG93lJm-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="CZVS23kr_gq7ErG93lJm-11" target="CZVS23kr_gq7ErG93lJm-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-11" value="Feature detection&lt;br&gt;&lt;br&gt;・Fast corner検出&lt;br&gt;・８段階のスケール別に処理&lt;br&gt;・各ScaleごとにGrid分けして最低５個検出する&lt;br&gt;・Orb特徴量はここで検出した特徴点で計算する" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="220" y="348.75" width="150" height="132.5" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="CZVS23kr_gq7ErG93lJm-12" target="CZVS23kr_gq7ErG93lJm-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-12" value="Feature tracking Phase 1&lt;br&gt;&lt;br&gt;・カメラ位置を低速度モーションモデルで推定&lt;br&gt;・前回Frameで観測されているMap Pointを、↑で推定したカメラPoseとして投影、投影結果とFeature detection結果を照らし合わせて対応点を探索&lt;br&gt;・一定以上の対応点が見つからない場合は、より広い範囲で対応点を探索する&lt;br&gt;・この時点で、対応点に基づきMotion only BAでカメラPoseを最適化する" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="520" y="230" width="250" height="183.75" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-13" value="Feature verification&lt;br&gt;&lt;br&gt;OrbSLAMでは、Feature trackingがVerificationを兼ねる？&lt;br&gt;基本MapPointに存在する点との対応を取るので、幾何的におかしい&lt;br&gt;Feature trackingが発生することはないはず" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="505" y="80" width="880" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-14" value="疑問：Feature detectionのタイミングは？&lt;br&gt;毎フレーム検出するのか、KeyFrameのみ検出するのか？&lt;br&gt;＝＞毎Frameの特徴点検出が必要&lt;br&gt;KLTなどで画像情報のみの特徴点トラッキングを行っている&lt;br&gt;わけではないので、常に検出する必要がある" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="500" width="340" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="CZVS23kr_gq7ErG93lJm-16" target="CZVS23kr_gq7ErG93lJm-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-16" value="Feature tracking（トラッキング失敗の場合）&lt;br&gt;・BoWに変換し、Global Relocalizaitonで一番近いFrame？Frameの候補？を探索&lt;br&gt;・Frame候補とORB特徴量の比較で対応点を探索&lt;br&gt;・PnP＋RANSACでカメラPoseを求める&lt;br&gt;・姿勢がそれなりの精度でも止まったら、候補Frameで観測されているMapPointを投影し、より多くの対応点を探索&lt;br&gt;・Motion only BAでカメラPoseを最適化&lt;br&gt;・通常の処理に戻る" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="520" y="418.12" width="250" height="183.75" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-17" value="前Frameに基づいたFeature tracking" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="180" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-18" value="ある程度精度が出たカメラPoseを求めるまでやる" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="505" y="200" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="CZVS23kr_gq7ErG93lJm-19" target="CZVS23kr_gq7ErG93lJm-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-19" value="Feature tracking　Phase 2&lt;br&gt;&lt;br&gt;・KeyFrameで観測されているMapPointから、さらに現在Frameで観測された特徴点の対応を取る&lt;br&gt;・対象となるKeyFrameは２種類ある&lt;br&gt;・１種類目：現在Frameで観測しているMapPointを共有しているKeyFrame（同じような場所を見ているかもしれない奴ら）&lt;br&gt;・２種類目：CoVisibilityグラフで、１種類目のKeyFrameに隣接しているKeyFrameすべて（ちょっと確率は低いが同じような場所を見ていそうな奴ら）&lt;br&gt;・↑のKeyFrame達で観測されているMapPointと現在のFrameで観測されている特徴点の対応を録っていく。&lt;br&gt;&lt;br&gt;・以下の基準で利用しないマップポイントを排除する。（現在の位置から見えそうにないMapPointや、遠すぎたり近すぎる？MapPointを排除する）&lt;br&gt;・基準１：MapPointに設定されている平均視線と、現在Frameからの視線の角度が60度以上なら、そのMapPointは利用しない。（オクルージョンの考慮か？現在カメラFrameの姿勢が、そのMapPointを観測できない可能性があるので、平均視線というパラメータで、MapPointが見える範囲というものを表現しているのかもしれない）&lt;br&gt;・基準２：MapPointまでの距離が、d_min, d_maxに入っていない場合は、そのMapPointは利用しない&lt;br&gt;&lt;br&gt;・残ったMapPointを現在カメラFrameに投影し、ORB特徴量を使って、現在Frameで検出された特徴点との対応を探索する。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="870" y="250" width="500" height="330" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-21" value="近隣のFrameで観測されたMapPointに基づいたFeature Tracking" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="940" y="220" width="360" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=34;jumpStyle=arc;shape=flexArrow;shadow=0;comic=0;" parent="1" source="CZVS23kr_gq7ErG93lJm-23" target="CZVS23kr_gq7ErG93lJm-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1755" y="830" />
              <mxPoint x="170" y="830" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-23" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・Global relocalizaitionを実施して、20 Frame経過&lt;br&gt;・LocalMappinngスレッドが動いていない&lt;br&gt;・最後のKeyFrame追加から20 Frame経過&lt;br&gt;・and で 50点以上のMapPointをTrackingできている&lt;br&gt;・同じMapPointを観測しているKeyFrameのうち、最も多くのMapPointを共有しているKeyFrameの、90%以下のMapPointしかTrackingしていない&lt;br&gt;&lt;br&gt;あとでKeyFrameは登録解除もするらいしいので割と緩めの基準でKeyFrame登録するらしい" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1500" y="337.5" width="510" height="155" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-30" value="" style="shape=flexArrow;endArrow=classic;html=1;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="160" y="414" as="sourcePoint" />
            <mxPoint x="210" y="413.75" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-35" value="Tracking thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=34;" parent="1" vertex="1">
          <mxGeometry x="-310" y="420" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-38" value="Local mapping thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=34;" parent="1" vertex="1">
          <mxGeometry x="-310" y="1080" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=34;" parent="1" source="CZVS23kr_gq7ErG93lJm-39" target="CZVS23kr_gq7ErG93lJm-41" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="1170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-39" value="KeyFrameの追加&lt;br&gt;&lt;br&gt;・新規追加KeyFrameを使ってCo-visibility graphの更新&lt;br&gt;・一番MapPointを共有するKeyFrameを繋いだSpanning Treeを更新&lt;br&gt;・KeyFrameをBoWに変換" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-20" y="1120" width="380" height="100" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=34;" parent="1" source="CZVS23kr_gq7ErG93lJm-41" target="CZVS23kr_gq7ErG93lJm-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=24;strokeWidth=3;" parent="1" source="CZVS23kr_gq7ErG93lJm-41" target="CZVS23kr_gq7ErG93lJm-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="645" y="990" />
              <mxPoint x="1070" y="990" />
              <mxPoint x="1070" y="770" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-41" value="MapPointの削除&lt;br&gt;&lt;br&gt;・削除判定の対象は最近追加されたMapPpointのみらしい。&lt;br&gt;・以下条件を満たさないものは削除決定。削除タイミングはこのあとにあるLocal BAでのOutlier除去のときに削除する。&lt;br&gt;&lt;br&gt;・削除条件１：見えているはずのKeyFrameの中で、25%以上見れていれば削除なし&lt;br&gt;・削除条件２：MapPointが作成され、その後にKeyFrameが追加された時、そのMapPointが３枚以上のKeyFrameで観測されていれば削除なし（単純に観測枚数が少ないものは消す？２５％判定にでも消されると思われるが、より即効性を持って絶対にOutlierポイMapPointを消すといこと？）&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="455" y="1060" width="380" height="220" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=24;strokeWidth=3;" parent="1" source="CZVS23kr_gq7ErG93lJm-42" target="CZVS23kr_gq7ErG93lJm-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1070" y="770" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-42" value="MapPointの追加&lt;br&gt;&lt;br&gt;・Co-visibility graphを使ってTriangulateするらしい&lt;br&gt;・そもそもMapPointとして登録されなければCo-visibility graohは作られないのでは？&lt;br&gt;・追加する特徴点がきまったら、一旦Triangulateして、Trackingのときと同じように更に観測しているKeyFrameの探索を行う&lt;br&gt;・BoWで作成したVocab Treeで対応候補を絞りつつ探索&lt;br&gt;・エピポーラ制約を持たさない対応は破棄する&lt;br&gt;・そもそも個々での処理が走る特徴点の基準はなんなのか？" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="880" y="1070" width="380" height="200" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=34;" parent="1" source="CZVS23kr_gq7ErG93lJm-43" target="CZVS23kr_gq7ErG93lJm-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-43" value="Local BA&lt;br&gt;&lt;br&gt;・Local BAの範囲は、今回追加したKeyFrameのCo-visibility graphで繋がったKeyFrameと、それらで観測されているMapPoint&lt;br&gt;・選択されているKeyFrame以外はMarginalize outする？&lt;br&gt;・BA終了後？に再投影誤差？など利用してMapPointのOutlierを除去？Local mapping処理の初めに決めた削除対象MapPointもこのタイミングで削除される。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1385" y="1090" width="380" height="160" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=34;" parent="1" source="CZVS23kr_gq7ErG93lJm-44" target="CZVS23kr_gq7ErG93lJm-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2300" y="1170" />
              <mxPoint x="2300" y="1370" />
              <mxPoint x="170" y="1370" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-44" value="KeyFrameの削除&lt;br&gt;&lt;br&gt;・以下の条件でKeyFrameが削除される&lt;br&gt;・条件１：MapPointの９０％が共有されているKeyFrame&lt;br&gt;・条件２：MapPointの９０％が小さいスケールとして観測されているKeyFrame？&lt;br&gt;&lt;br&gt;詳細な条件は不明、&lt;b&gt;要調査。&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1850" y="1100" width="380" height="140" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-46" value="疑問１：MapPointに追加する特徴点の基準は？&lt;br&gt;疑問２：MapPointに追加する前の特徴点のCovisibility graphは生成されていいないはず。どうやって対応関係を探索するのか？" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="880" y="1280" width="690" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;jumpStyle=arc;" parent="1" source="CZVS23kr_gq7ErG93lJm-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="80" y="510" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2120" y="415" />
              <mxPoint x="2120" y="710" />
              <mxPoint x="80" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-53" value="&lt;h1&gt;Kimera-VIO&lt;/h1&gt;&lt;p&gt;MapPointを再投影するなどやっていない&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-420" y="1440" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;shadow=0;fontSize=24;strokeWidth=3;" parent="1" source="CZVS23kr_gq7ErG93lJm-54" target="CZVS23kr_gq7ErG93lJm-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;shadow=0;fontSize=24;strokeWidth=3;" parent="1" source="CZVS23kr_gq7ErG93lJm-54" target="CZVS23kr_gq7ErG93lJm-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;shadow=0;fontSize=24;strokeWidth=3;" parent="1" source="CZVS23kr_gq7ErG93lJm-54" target="CZVS23kr_gq7ErG93lJm-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="790" y="770" />
              <mxPoint x="790" y="600" />
              <mxPoint x="850" y="600" />
              <mxPoint x="850" y="497" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;comic=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;shadow=0;strokeWidth=3;fontSize=24;" parent="1" source="CZVS23kr_gq7ErG93lJm-54" target="CZVS23kr_gq7ErG93lJm-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="790" y="770" />
              <mxPoint x="790" y="600" />
              <mxPoint x="1450" y="600" />
              <mxPoint x="1450" y="454" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-54" value="MapPoint" style="rounded=0;whiteSpace=wrap;html=1;align=center;fontSize=24;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="810" y="740" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CZVS23kr_gq7ErG93lJm-22" value="疑問：MapPoint追加はどうやるのか？　＝＞　カメラTracking（Front end?）のスレッドでは追加なし&lt;br&gt;　　　　　　　　　　　　　　　　　　　　　Local Mappingスレッドで追加するかどうか判断し、クリアしたものだけが追加される&lt;br&gt;ここまでで、MapPointとして登録済みの特徴点と現在Frameの特徴点の対応付けにいろいろ工夫があることはわかった。&lt;br&gt;しかし、対応付けができていない特徴点をMapPointに追加しなければ、初期化時に生成したMapPointしか存在できない。" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="550" y="620" width="730" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-1" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="-20" y="1586" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-2" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="-10" y="1596" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="UyCWRXfSo20qLZG2_h02-3" target="UyCWRXfSo20qLZG2_h02-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1180" y="1490" as="targetPoint" />
            <mxPoint x="130" y="1651" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="190" y="1651" />
              <mxPoint x="190" y="1520" />
              <mxPoint x="1450" y="1520" />
              <mxPoint x="1450" y="1631" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="UyCWRXfSo20qLZG2_h02-3" target="UyCWRXfSo20qLZG2_h02-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-3" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry y="1606" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-4" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="10" y="1556" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="UyCWRXfSo20qLZG2_h02-5" target="UyCWRXfSo20qLZG2_h02-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-5" value="Feature tracking&lt;br&gt;&lt;br&gt;・Lukas-Kanade trackerで特徴点を追跡" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="280" y="1610" width="221" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="UyCWRXfSo20qLZG2_h02-6" target="UyCWRXfSo20qLZG2_h02-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-6" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・以下の基準を満たせばKeyFrameとして選択する&lt;br&gt;・基準１：前回のKeyFrame選択から一定時間経っている&lt;br&gt;・基準２：Trackingできている特徴点が一定以下になった" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="580" y="1610" width="360" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="1710" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1790" y="1651" />
              <mxPoint x="1790" y="1770" />
              <mxPoint x="370" y="1770" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-9" value="Feature detection&lt;br&gt;&lt;br&gt;・Shi-Tomasi cornersで特徴点検出&lt;br&gt;・Keyframeのみで特徴点の検出を行う" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1500" y="1610" width="240" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="UyCWRXfSo20qLZG2_h02-10" target="UyCWRXfSo20qLZG2_h02-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-10" value="Verificaiton&lt;br&gt;&lt;br&gt;・１Frame目はKeyFrame&lt;br&gt;・単眼カメラの場合は５点法＋RANSACで特徴点を選別&lt;br&gt;・Landmark ageが一定値以上の場合は排除（何回KeyFrameに観測されたか？をカウントする。）&lt;br&gt;・同時にLandmark視差の中央値、トラッキングしている特徴点数のチェックを行う。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1060" y="1581.25" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-18" value="１Frame目はトラッキングできない&lt;br&gt;のでKeyFrameとして、特徴点検出を行う" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="261" y="1480" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-19" value="Tracking thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=34;" parent="1" vertex="1">
          <mxGeometry x="-280" y="1600" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-21" value="&lt;h1&gt;VINS-Mono&lt;/h1&gt;&lt;p&gt;こちらも、MapPointを再投影するなどやっていない&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-410" y="1920" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-22" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="-10" y="2030" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-23" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry y="2040" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-24" target="UyCWRXfSo20qLZG2_h02-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="199.99999999999977" y="2095" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-24" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="10" y="2050" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-25" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="2000" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-26" value="Tracking thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=34;" parent="1" vertex="1">
          <mxGeometry x="-280" y="2070" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-28" target="UyCWRXfSo20qLZG2_h02-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-28" value="Feature detection&lt;br&gt;&lt;br&gt;・Shi-Tomasi cornersで特徴点検出&lt;br&gt;・指定した検出件数になるように毎Frame実施&lt;br&gt;・トラッキングできている特徴点に数を加える感じ" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="510" y="2033.6599999999999" width="240" height="122.69" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-29" target="UyCWRXfSo20qLZG2_h02-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-29" value="Verifucation&lt;br&gt;&lt;br&gt;・５点法＋RANSACで特徴点を選別&lt;br&gt;・毎フレームVerificaitonを実施する&lt;br&gt;・比較Frameは一つまえのFrame" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="781.5" y="2051.3199999999997" width="300" height="87.36999999999989" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="2150" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1540" y="2095" />
              <mxPoint x="1540" y="2230" />
              <mxPoint x="350" y="2230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-31" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・以下の基準を満たせばKeyFrameとして選択する&lt;br&gt;・基準１：前回KeyFrameからの平均視差が基準を超えている&lt;br&gt;・基準２：Trackingできている特徴点が一定以下になっている" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1121.5" y="2053.7549999999997" width="360" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UyCWRXfSo20qLZG2_h02-32" target="UyCWRXfSo20qLZG2_h02-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UyCWRXfSo20qLZG2_h02-32" value="Feature tracking&lt;br&gt;&lt;br&gt;・Lukas-Kanade trackerで特徴点を追跡" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="240" y="2053.7549999999997" width="221" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-1" value="&lt;h1&gt;VITAMIN-E&lt;/h1&gt;&lt;p&gt;こちらも、MapPointを再投影するなどやっていないし、特徴点も利用しない&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-400" y="2413.02" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-7" value="Tracking thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=34;" parent="1" vertex="1">
          <mxGeometry x="-280" y="2540" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-17" target="VGC260k_tyWZGbdCQ8ms-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="2655.02" />
              <mxPoint x="720" y="2580.02" />
              <mxPoint x="510" y="2580.02" />
              <mxPoint x="510" y="2518.02" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-17" value="Estimate Dominant Flow&lt;br&gt;&lt;br&gt;・Detect feature point（Shi-tomasi corner or something）&lt;br&gt;・Compute the BRIEF feature&lt;br&gt;・前フレームとのマッチングを探索し、Affine変換を推定する" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="270" y="2610.03" width="366" height="89.99" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-18" target="VGC260k_tyWZGbdCQ8ms-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="360" y="2518.02" />
              <mxPoint x="360" y="2580.02" />
              <mxPoint x="200" y="2580.02" />
              <mxPoint x="200" y="2655.02" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-18" value="Resize Image&lt;br&gt;1/6 or 1/3 ..." style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="210" y="2493.02" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-19" value="Feature detection&lt;br&gt;&lt;br&gt;・画像中で特徴点分布が均等になるように特徴点を追加&lt;br&gt;・特徴点の存在しない部分に一様分布で特徴点を配置&lt;br&gt;・配置した位置を初期値として、曲率ピーク探索を実施、特徴点位置とする" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1220" y="2420" width="350" height="120" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-20" target="VGC260k_tyWZGbdCQ8ms-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-20" value="曲率画像生成" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="616" y="2409.999999999999" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VGC260k_tyWZGbdCQ8ms-22" target="VGC260k_tyWZGbdCQ8ms-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-22" value="Feature tracking&lt;br&gt;&lt;br&gt;・ワープした前Frame特徴点位置を初期値として、現在Frameの曲率ピークを探索&lt;br&gt;・ピーク位置を現在Frameの特徴点位置とする" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="805" y="2435.0099999999998" width="366" height="89.99" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-23" target="VGC260k_tyWZGbdCQ8ms-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-23" value="Feature warp&lt;br&gt;&lt;br&gt;・推定したDominant Flowを元に、前回Frameの特徴点位置を移動する" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="530" y="2480.0199999999995" width="216" height="75.01" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-24" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="10" y="2440" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-25" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="20" y="2450" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-26" target="VGC260k_tyWZGbdCQ8ms-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="2505.02" />
              <mxPoint x="160" y="2440.02" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGC260k_tyWZGbdCQ8ms-26" target="VGC260k_tyWZGbdCQ8ms-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="2505.02" />
              <mxPoint x="160" y="2518.02" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-26" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="1" vertex="1">
          <mxGeometry x="30" y="2460" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-27" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="10" y="2410" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="VGC260k_tyWZGbdCQ8ms-40" value="この部分は、自分が推測している部分なので実際とは違う可能性あり&lt;br&gt;・DSOのように、画像の勾配の大きい部分のみに初期特徴点位置を配置しているようにも動画が見える&lt;br&gt;・また、特徴点寿命についても言及がない、曲率ピーク探索の部分で若い特徴点が重なる可能性は十分にあるので、Landmarkの寿命管理のようなものは必要だろう" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1171" y="2543.02" width="460" height="86.98" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="KfDyO8I-pmFeG0Nn9npx" name="Proposed-Frontend">
    <mxGraphModel dx="1158" dy="1942" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-0" />
        <mxCell id="jS7kERMsJuhV1MZeAvF8-1" parent="jS7kERMsJuhV1MZeAvF8-0" />
        <mxCell id="JLCo8iVKEaS2xN67FaIW-54" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2840" y="90" width="900" height="110" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontSize=20;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1450" y="705" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1560" y="350" width="2220" height="710" as="geometry" />
        </mxCell>
        <mxCell id="rEQugnzsgqi3RL8a4t9Y-0" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2220" y="-800" width="900" height="110" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-15" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="90" y="480" width="210" height="370" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" source="wpz5wSuJC5iDqOlf-yGl-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3350" y="-450.0000000000002" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-0" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1560" y="-670" width="1710" height="490" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-16" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="560" y="-620" width="190" height="200" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-3" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="260" y="-520" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-4" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="270" y="-510" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-5" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="280" y="-500" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-6" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="290" y="-550" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-7" value="Frontend : Tracking thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="-100" y="-495" width="520" height="26" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-9" value="Database&lt;br&gt;Map Point" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="630" y="-264" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-11" value="Feature tracking" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="570" y="-615" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-12" value="KeyFrame Selection" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="570" y="-565" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-13" value="Feature Verification" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="570" y="-515" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-14" value="Feature detection" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="570" y="-470" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-17" value="" style="endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="-470" as="sourcePoint" />
            <mxPoint x="550" y="-455" as="targetPoint" />
            <Array as="points">
              <mxPoint x="470" y="-470" />
              <mxPoint x="470" y="-455" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-18" value="画像入力" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="430" y="-495" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-20" value="" style="endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="674.6599999999999" y="-400.0000000000001" as="sourcePoint" />
            <mxPoint x="674.6599999999999" y="-300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-21" value="" style="endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660.34" y="-300" as="sourcePoint" />
            <mxPoint x="659.9999999999999" y="-400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-26" value="Tracking時にFeatureの登録を行う&lt;br&gt;タイプは、データベースへの&lt;br&gt;書き込みあり" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="680" y="-380" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jS7kERMsJuhV1MZeAvF8-27" value="Tracking時に&lt;br&gt;Featureの登録を行う&lt;br&gt;タイプは、データベースへの&lt;br&gt;書き込みあり" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="440" y="-390" width="210" height="80" as="geometry" />
        </mxCell>
        <mxCell id="E5dKJIL_beY_BMzwWjuv-0" value="ミッション：&lt;br&gt;・新しい入力画像において、いままであった特徴点位置を求める&lt;br&gt;・新しい入力画像のPose推定を行う&lt;br&gt;・KeyFrameかどうかの判断をする&lt;br&gt;・特徴点のメンテナンスをする（追加とVerification、OrbSLAMみたいに追加しないパターンもあり）" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="190" y="-730" width="690" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-0" value="Database&lt;br&gt;Frame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="970" y="-264" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-1" value="" style="endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="780" y="-480" as="sourcePoint" />
            <mxPoint x="1000" y="-290" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1000" y="-480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-2" value="全ての観測したFrameが&lt;br&gt;登録されてる&lt;br&gt;最新FrameのPoseも出力&lt;br&gt;（最適化はしない）" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="800" y="-565" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-3" value="" style="endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1220" y="-290" as="sourcePoint" />
            <mxPoint x="770" y="-590" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1220" y="-590" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-4" value="前回KeyFrameの&lt;br&gt;参照などあり" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1070" y="-640" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-5" value="Database&lt;br&gt;KeyFrame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1190" y="-263.99999999999983" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-6" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1082.25" y="-234.34" as="sourcePoint" />
            <mxPoint x="1147.75" y="-234.34" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-7" value="Subset of Frame database" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1020" y="-294" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-9" value="カメラモデル&lt;br&gt;の話は&lt;br&gt;どこで入ってくる？" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;strokeColor=#b85450;strokeWidth=1;fontSize=15;fillColor=#f8cecc;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="366.5" y="-905" width="170" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-10" value="カメラモデル扱いの問題&lt;br&gt;・VIO系は画像補正なしでFeature trackすること多い&lt;br&gt;・VITAMIN-EはDominant flow推定がAffine変換前提なので補正が必要&lt;br&gt;・OrbSLAMはReprojectionができればなんででOK" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=1;fontSize=15;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="543.5" y="-905" width="610" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-11" value="開発方針&lt;br&gt;・とりあえず、VSLAM version 2ということで、Front-end, Back-endが明示的に分割されたシステムを作ってみよう！&lt;br&gt;・FrontendとBackendで２つスレッドを立てる&lt;br&gt;・Frontend : 画像ベースのトラッキングに基づく方法（OrbSLAM的なMapPointがフィードバックされる方法は別途考えます）&lt;br&gt;・Backend : iSAM2(GTSAM)を使ったVIOのOptimizaitonを実装&lt;br&gt;&lt;br&gt;流れ&lt;br&gt;１．Frontend、Backendを別スレッドにできるようにしつつ、シングルスレッドでの動作をまず実装する&lt;br&gt;２．シングルスレッドである程度動くようになったら２スレッド動作を目指す（なるのか？）" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="90" y="-1150" width="860" height="170" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-12" value="Backend : Optimization thread" style="rounded=0;whiteSpace=wrap;html=1;align=center;rotation=-90;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="10" y="40" width="300" height="26" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-19" value="iSAM2がいい感じに最適化をかけてくれる" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="500" y="106" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-24" value="ミッション&lt;br&gt;・Frontend作ったら考えます。" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="190" y="-90" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ytnsG8BYgxHmYPclWwfR-25" value="Thread safeな&lt;br&gt;MapPoint/Frame&lt;br&gt;Databaseは&lt;br&gt;どんな実装になっている？" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;strokeColor=#b85450;strokeWidth=1;fontSize=15;fillColor=#f8cecc;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="156.5" y="-910" width="210" height="120" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-0" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1390" y="-384" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-1" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1400" y="-374" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-4" target="clbbCS2im2Wf6gLjw8WZ-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2590" y="-480" as="targetPoint" />
            <mxPoint x="1540" y="-319" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1600" y="-319" />
              <mxPoint x="1600" y="-450" />
              <mxPoint x="2860" y="-450" />
              <mxPoint x="2860" y="-339" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-4" target="clbbCS2im2Wf6gLjw8WZ-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-4" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1410" y="-364" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-5" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1420" y="-414" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-7" target="clbbCS2im2Wf6gLjw8WZ-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-7" value="Feature tracking&lt;br&gt;&lt;br&gt;・Lukas-Kanade trackerで特徴点を追跡" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1690" y="-360" width="221" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-9" target="clbbCS2im2Wf6gLjw8WZ-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-9" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・以下の基準を満たせばKeyFrameとして選択する&lt;br&gt;・基準１：前回のKeyFrame選択から一定時間経っている&lt;br&gt;・基準２：Trackingできている特徴点が一定以下になった" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1990" y="-360" width="360" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2350" y="-710" as="targetPoint" />
            <Array as="points">
              <mxPoint x="3230" y="-319" />
              <mxPoint x="3230" y="-500" />
              <mxPoint x="2350" y="-500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3030" y="-700" as="targetPoint" />
            <Array as="points">
              <mxPoint x="3030" y="-690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-11" value="Feature detection&lt;br&gt;&lt;br&gt;・Shi-Tomasi cornersで特徴点検出&lt;br&gt;・Keyframeのみで特徴点の検出を行う" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2910" y="-360" width="240" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-13" target="clbbCS2im2Wf6gLjw8WZ-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-13" value="Verificaiton&lt;br&gt;&lt;br&gt;・１Frame目はKeyFrame&lt;br&gt;・単眼カメラの場合は５点法＋RANSACで特徴点を選別&lt;br&gt;・Landmark ageが一定値以上の場合は排除（何回KeyFrameに観測されたか？をカウントする。）&lt;br&gt;・同時にLandmark視差の中央値、トラッキングしている特徴点数のチェックを行う。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2470" y="-388.75" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-14" value="１Frame目はトラッキングできない&lt;br&gt;のでKeyFrameとして、特徴点検出を行う" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1671" y="-490" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-15" value="ひとまず、Kimera-VIOのFrontendを実装してみる" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1400" y="-750" width="350" height="20" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-16" value="Database&lt;br&gt;Frame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2300" y="-780" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-17" value="Database&lt;br&gt;KeyFrame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2460" y="-780" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;fontSize=15;jumpStyle=arc;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2320" y="-710" as="targetPoint" />
            <mxPoint x="2080" y="-360" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2080" y="-500" />
              <mxPoint x="2320" y="-500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-22" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2380" y="-750.42" as="sourcePoint" />
            <mxPoint x="2450" y="-750.42" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-23" value="FrameがKeyFrameでないとき：&lt;br&gt;・KeyFrameではないFrame　&lt;br&gt;として登録する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2070" y="-570" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-25" value="FrameがKeyFrameの場合：&lt;br&gt;・KeyFrameとして、Feature VerificationとFeature detectionを&lt;br&gt;行った後にDatabaseに登録する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2460" y="-570" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-26" value="Database&lt;br&gt;Map Point" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2990" y="-770" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-29" value="新たに検出したLandmarkを&lt;br&gt;追加する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="3040" y="-590" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpStyle=arc;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;" parent="jS7kERMsJuhV1MZeAvF8-1" source="clbbCS2im2Wf6gLjw8WZ-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3020" y="-700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="clbbCS2im2Wf6gLjw8WZ-30" value="・Frameの登録時に特徴点の観測情報も更新する" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=1;fontSize=15;align=left;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2260" y="-660" width="175" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-1" value="Frontend::feed_frame" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1550" y="-700" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-4" value="Frontend Status として&lt;br&gt;処理のステータスを出力？" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="3370" y="-465" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-6" value="" style="endArrow=classic;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="536.5" y="90" as="sourcePoint" />
            <mxPoint x="656.5" y="-190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="536.5" y="-100" />
              <mxPoint x="656.5" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-7" value="" style="endArrow=classic;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="677" y="-190" as="sourcePoint" />
            <mxPoint x="556.5" y="90" as="targetPoint" />
            <Array as="points">
              <mxPoint x="676.5" y="-90" />
              <mxPoint x="556.5" y="-90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-8" value="" style="endArrow=classic;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="707" y="90" as="sourcePoint" />
            <mxPoint x="1000" y="-190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="707" y="-100" />
              <mxPoint x="1000" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-9" value="" style="endArrow=classic;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1020" y="-190" as="sourcePoint" />
            <mxPoint x="730" y="90" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1020" y="-90" />
              <mxPoint x="730" y="-90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-10" value="Database&lt;br&gt;Map Point" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="118.5" y="540" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-11" value="Database&lt;br&gt;Frame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="118.5" y="640" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-12" value="Database&lt;br&gt;KeyFrame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="118.5" y="740.0000000000002" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-13" value="・mutex" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="130" y="700" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-14" value="・mutex" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="140" y="600" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-16" value="MapDatabase&lt;br&gt;・内容の保持はしない&lt;br&gt;・簡便、高速なアクセスサービスの提供" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="70" y="430" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="wpz5wSuJC5iDqOlf-yGl-17" target="wpz5wSuJC5iDqOlf-yGl-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="770" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="wpz5wSuJC5iDqOlf-yGl-17" target="wpz5wSuJC5iDqOlf-yGl-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="670" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-17" value="KeyFrameの実体" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="430" y="480" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="jS7kERMsJuhV1MZeAvF8-1" source="wpz5wSuJC5iDqOlf-yGl-18" target="wpz5wSuJC5iDqOlf-yGl-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="397" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-18" value="MapPointの実体" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="256.5" y="380" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-19" value="・mutex" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="130" y="800" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-23" value="ポインタを持つようにする" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="316.5" y="575" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-24" value="ポインタを持つようにする" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="310" y="680" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-25" value="ポインタを持つようにする" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="310" y="780" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-26" value="実行機能&lt;br&gt;・add_frame&lt;br&gt;・erase_frame&lt;br&gt;・add_landmark&lt;br&gt;・erase_landmark&lt;br&gt;・get_all_landmarks&lt;br&gt;・get_all_frames&lt;br&gt;・get_latest_frame&lt;br&gt;・get_latest_keyframe" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="100" y="855" width="140" height="130" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-27" value="1Frame前のFrameと&lt;br&gt;画像中のFeature pointがほしい" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="1690" y="-264" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-28" value="前回KeyFrameの情報がほしい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2000" y="-259" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-29" value="前回KeyFrameの情報がほしい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2470" y="-244" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-31" value="MapPointを登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2910" y="-274" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-32" value="Frame情報を登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2000" y="-239" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-33" value="KeyFrame情報を登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="2910" y="-254" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-34" value="＋co-visibility graphの更新&lt;br&gt;＋spanning-treeの更新" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="100" y="990" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-36" value="各Frameはmutexを持つので&lt;br&gt;内容にアクセスするときは、排他処理を実施" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="570" y="560" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wpz5wSuJC5iDqOlf-yGl-37" value="各Pointはmutexを持つので&lt;br&gt;内容にアクセスするときは、排他処理を実施" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="jS7kERMsJuhV1MZeAvF8-1" vertex="1">
          <mxGeometry x="366.5" y="350" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rEQugnzsgqi3RL8a4t9Y-3" value="MapDatabase" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2220" y="-820" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-3" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1390" y="496" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-4" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1400" y="506" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" source="JLCo8iVKEaS2xN67FaIW-7" target="JLCo8iVKEaS2xN67FaIW-15" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2590" y="400" as="targetPoint" />
            <mxPoint x="1540" y="561" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1600" y="561" />
              <mxPoint x="1600" y="430" />
              <mxPoint x="2860" y="430" />
              <mxPoint x="2860" y="541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="JLCo8iVKEaS2xN67FaIW-7" target="JLCo8iVKEaS2xN67FaIW-10" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-7" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn.tatsunoko-mall.com/res/tatsunoko/NTMX-8-2019-10-17-11-00-03/5da7cb232b18c;imageBackground=#000000;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1410" y="516" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-8" value="Camera Input" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1420" y="466" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="JLCo8iVKEaS2xN67FaIW-10" target="JLCo8iVKEaS2xN67FaIW-12" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-10" value="Feature tracking&lt;br&gt;&lt;br&gt;・Lukas-Kanade trackerで特徴点を追跡" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1690" y="520" width="221" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="JLCo8iVKEaS2xN67FaIW-12" target="JLCo8iVKEaS2xN67FaIW-17" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-12" target="JLCo8iVKEaS2xN67FaIW-55">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2390" y="561" />
              <mxPoint x="2390" y="790" />
              <mxPoint x="3220" y="790" />
              <mxPoint x="3220" y="561" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-12" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・以下の基準を満たせばKeyFrameとして選択する&lt;br&gt;・基準１：前回のKeyFrame選択から一定時間経っている&lt;br&gt;・基準２：Trackingできている特徴点が一定以下になった" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1990" y="520" width="360" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-15" target="JLCo8iVKEaS2xN67FaIW-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-15" value="Feature detection&lt;br&gt;&lt;br&gt;・Shi-Tomasi cornersで特徴点検出&lt;br&gt;・Keyframeのみで特徴点の検出を行う" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2910" y="520" width="240" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="JLCo8iVKEaS2xN67FaIW-17" target="JLCo8iVKEaS2xN67FaIW-15" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-17" value="Verificaiton &amp;amp; 前回Frameとのrelative pose推定&lt;br&gt;&lt;br&gt;・１Frame目はKeyFrame&lt;br&gt;・単眼カメラの場合は５点法＋RANSACで特徴点を選別&lt;br&gt;・Landmark ageが一定値以上の場合は排除（何回KeyFrameに観測されたか？をカウントする。）&lt;br&gt;・同時にLandmark視差の中央値、トラッキングしている特徴点数のチェックを行う。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2505" y="471.8750000000001" width="330" height="178.75" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-18" value="１Frame目はトラッキングできない&lt;br&gt;のでKeyFrameとして、特徴点検出を行う" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1671" y="390" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-19" value="ひとまず、Kimera-VIOのFrontendを実装してみる&lt;br&gt;完全には同じにならない。IMUの情報をナチュラルに使ってきているので、その部分に制約がでる。&lt;br&gt;&lt;br&gt;例えば：&lt;br&gt;・Geometric verificationでは、IMUから得たRotationを利用&lt;br&gt;・KeyFrameではないFrameのPoseはIMUの情報をそのまま使っている？&lt;br&gt;&lt;br&gt;などなど" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1540" y="146" width="690" height="150" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-20" value="Database&lt;br&gt;Frame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3300" y="110" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-21" value="Database&lt;br&gt;KeyFrame" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3495" y="110" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-23" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=15;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3395" y="139.57999999999993" as="sourcePoint" />
            <mxPoint x="3465" y="139.57999999999993" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-25" value="FrameがKeyFrameの場合：&lt;br&gt;・KeyFrameとして、Feature VerificationとFeature detectionを&lt;br&gt;行った後にDatabaseに登録する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3360" y="240" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-26" value="Database&lt;br&gt;Map Point" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2995" y="110" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-27" value="新たに検出したLandmarkを&lt;br&gt;追加する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=15;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2960" y="240" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-30" value="Frontend::feed_frame" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1550" y="320" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-32" value="1Frame前のFrameと&lt;br&gt;画像中のFeature pointがほしい" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1690" y="616" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-33" value="前回KeyFrameの情報がほしい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2000" y="621" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-35" value="MapPointを登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2910" y="606" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-36" value="Frame情報を登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2000" y="641" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-37" value="KeyFrame情報を登録したい" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2910" y="626" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-38" value="MapDatabase" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2840" y="70" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3340" y="180" as="targetPoint" />
            <Array as="points">
              <mxPoint x="3340" y="320" />
              <mxPoint x="3340" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-40" value="KeyFrameの時" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2415" y="540" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-42" value="KeyFrameでない時" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;rotation=-90;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="2315" y="680" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3080" y="140" as="targetPoint" />
            <Array as="points">
              <mxPoint x="3170" y="390" />
              <mxPoint x="3170" y="140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-29" value="Frameの登録時に特徴点の観測情報も更新する" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=1;fontSize=15;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3260" y="360" width="175" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-53" value="Frontend Status として&lt;br&gt;処理のステータスを出力？" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1290" y="690" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-55" target="JLCo8iVKEaS2xN67FaIW-29">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3680" y="561" />
              <mxPoint x="3680" y="390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-55" value="Pose推定&lt;br&gt;&lt;br&gt;（可能なら；3点以上の対応点がないなど）&lt;br&gt;・3point ransacを使って、MapDatabaseから現在FrameのPoseを推定する&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3280" y="521.25" width="325" height="80" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-60" value="" style="endArrow=none;dashed=1;html=1;strokeWidth=3;exitX=0.761;exitY=0.983;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="jS7kERMsJuhV1MZeAvF8-1" source="JLCo8iVKEaS2xN67FaIW-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3250" y="970" as="sourcePoint" />
            <mxPoint x="3250" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-61" value="ここまでは、&lt;br style=&quot;font-size: 12px;&quot;&gt;・Feature tracking&lt;br style=&quot;font-size: 12px;&quot;&gt;・Feature verification&lt;br style=&quot;font-size: 12px;&quot;&gt;・Feature detection&lt;br style=&quot;font-size: 12px;&quot;&gt;&lt;br style=&quot;font-size: 12px;&quot;&gt;のみに注力する&lt;br style=&quot;font-size: 12px;&quot;&gt;&lt;br style=&quot;font-size: 12px;&quot;&gt;Pose推定は利用しない&lt;br style=&quot;font-size: 12px;&quot;&gt;MapDBも活用しない&lt;br style=&quot;font-size: 12px;&quot;&gt;Landmark位置も利用しない" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontStyle=0" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3090" y="795" width="160" height="150" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-63" value="ここではじめて、&lt;br style=&quot;font-size: 12px;&quot;&gt;・MapDBへの参照&lt;br style=&quot;font-size: 12px;&quot;&gt;・Pose推定&lt;br style=&quot;font-size: 12px;&quot;&gt;・Landmark位置の利用（３Point法）&lt;br style=&quot;font-size: 12px;&quot;&gt;がなされる" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontStyle=0" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3360" y="616" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-66" value="Feature tracking&lt;br&gt;&lt;br&gt;・Lukas-Kanade trackerで特徴点を追跡&lt;br&gt;・Landmark ageをカウントアップ：&lt;br&gt;　・ageの指標として、トラッキングのFrame数とタイムスタンプからの経過時間がある。どちらがいいか判断できないので、両方ともAgeとして保持することにする。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1710" y="1220" width="415" height="130" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-67" value="KeyFrame Selection&lt;br&gt;&lt;br&gt;・以下の基準を満たせばKeyFrameとして選択する&lt;br&gt;・基準１：前回のKeyFrame選択から一定時間経っている&lt;br&gt;・基準２：Trackingできている特徴点が一定以下になった" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1710" y="1390" width="360" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-68" value="Verificaiton &amp;amp; 前回Frameとのrelative pose推定&lt;br&gt;&lt;br&gt;・１Frame目はKeyFrame&lt;br&gt;・単眼カメラの場合は５点法＋RANSACで特徴点を選別&lt;br&gt;・Landmark ageが一定値以上の場合は排除（何回KeyFrameに観測されたか？をカウントする。）&lt;br&gt;・同時にLandmark視差の中央値、トラッキングしている特徴点数のチェックを行う。" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1710" y="1500.0049999999999" width="330" height="178.75" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-69" value="Feature detection&lt;br&gt;&lt;br&gt;・Shi-Tomasi cornersで特徴点検出&lt;br&gt;・Keyframeのみで特徴点の検出を行う&lt;br&gt;・画像全体で均一な検出を行うために、画像分割をしてDetectionを実施" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="1710" y="1720" width="450" height="130" as="geometry" />
        </mxCell>
        <mxCell id="JLCo8iVKEaS2xN67FaIW-70" value="・Tracking&lt;br style=&quot;font-size: 12px;&quot;&gt;・Verification&lt;br style=&quot;font-size: 12px;&quot;&gt;・Detection&lt;br style=&quot;font-size: 12px;&quot;&gt;では、&lt;br style=&quot;font-size: 12px;&quot;&gt;１．画像上に検出されたFeature pointが、&lt;br style=&quot;font-size: 12px;&quot;&gt;２．あるIDを持って、複数Frame間で継続的に追跡され、&lt;br style=&quot;font-size: 12px;&quot;&gt;３．入力画像上に存在しているFeatureのIDと位置のペアを出力できれば、&lt;br style=&quot;font-size: 12px;&quot;&gt;OK" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontStyle=0" vertex="1" parent="jS7kERMsJuhV1MZeAvF8-1">
          <mxGeometry x="3270" y="820" width="420" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
